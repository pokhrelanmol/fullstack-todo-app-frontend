(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{231:function(e,t){},233:function(e,t){},248:function(e,t){},250:function(e,t){},278:function(e,t){},280:function(e,t){},281:function(e,t){},286:function(e,t){},288:function(e,t){},294:function(e,t){},296:function(e,t){},315:function(e,t){},327:function(e,t){},330:function(e,t){},348:function(e,t,a){},356:function(e,t,a){},455:function(e,t,a){},456:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a.n(s),n=a(198),o=a.n(n),r=a(12),l=a(6),i=a(5),d=a(4),j=a.n(d),p=a(13),u=a(23),b=a.n(u),m=a(199),O=a.n(m),h=a(11),x=a(0),f=Object(s.createContext)(""),g=function(e){var t=e.children,a=c.a.useState(),s=Object(r.a)(a,2),n=s[0],o=s[1];return Object(x.jsx)(f.Provider,{value:{username:n,setUsername:o},children:t})},v=(a(348),function(e){var t=e.dispatch,a=e.todos,c=e.loading,n=Object(s.useContext)(f).username,o=Object(h.f)(),l=Object(s.useState)(""),i=Object(r.a)(l,2),d=i[0],u=i[1];function m(){return(m=Object(p.a)(j.a.mark((function e(){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("http://localhost:3001/todos",{headers:{"x-access-token":localStorage.getItem("token")}});case 2:if("OK"!==(a=e.sent).statusText){e.next=10;break}return e.next=6,a.data.todo;case 6:e.sent,t({type:w.FETCH,payload:{data:a.data.todo,loading:!1}}),e.next=11;break;case 10:alert(a.data.error);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){var e=localStorage.getItem("token");e?O.a.decode(e)?function(){m.apply(this,arguments)}():(localStorage.removeItem("token"),o.replace("/login")):o.replace("/register")}),[]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h2",{style:{textAlign:"right",textTransform:"capitalize",paddingRight:"10rem"},children:["Hi, ",n]}),Object(x.jsxs)("div",{className:"main-container",children:[Object(x.jsx)("h1",{className:"heading",children:"Todos"}),Object(x.jsxs)("div",{className:"inputs-wrapper",children:[Object(x.jsx)("input",{type:"text",name:"input",value:d,onChange:function(e){u(e.target.value)},placeholder:"Enter Todo"}),Object(x.jsx)("i",{className:"fas fa-plus-circle add-icon icons",onClick:function(){u(""),t({type:w.ADD,payload:d})}}),Object(x.jsxs)("ol",{children:[c?"loading...":"",null===a||void 0===a?void 0:a.map((function(e,a){return Object(x.jsxs)("div",{className:"todos",children:[Object(x.jsx)("li",{children:e.todo}),Object(x.jsxs)("div",{className:"icons-wrapper",children:[Object(x.jsx)("i",{className:"fas fa-edit icons edit-icon",onClick:function(){t({type:w.EDIT,payload:e.id})}}),Object(x.jsx)("i",{className:"fas fa-trash-alt icons delete-icon",onClick:function(){return t({type:w.DELETE,payload:e.id})}})]})]},a)}))]})]})]})]})}),N=function(e){var t=e.isOpen,a=e.data,s=e.dispatch,n=c.a.useState(!0),o=Object(r.a)(n,2),l=o[0],i=o[1],d=c.a.useState(""),j=Object(r.a)(d,2),p=j[0],u=j[1];return c.a.useEffect((function(){i(t),u(a?a.todo:"")}),[t,a]),l?Object(x.jsxs)("div",{style:{position:"absolute",inset:"0 0 0 0",width:"100%",height:"100vh",backgroundColor:"gray",opacity:"0.70",display:"grid",placeContent:"center"},children:[Object(x.jsx)("input",{type:"text",value:p,onChange:function(e){return u(e.target.value)}}),Object(x.jsx)("button",{onClick:function(){s({type:w.UPDATE,payload:{updatedTodo:p,id:a.id}}),i(!1)},children:"Update"}),Object(x.jsx)("button",{onClick:function(){return i(!1)},children:"cancel"})]}):null},w={FETCH:"FETCH_DATA",ADD:"ADD_TODO",DELETE:"DELETE_TODO",EDIT:"EDIT_TODO",UPDATE:"UPDATE_TODO",TOGGLE_MODAL:"TOGGLE_MODAL"},y={todos:[],loading:!0,modalOpen:!1,todoToBeEdited:""},k=function(e,t){switch(t.type){case w.FETCH:var a=t.payload.data;if(a)return Object(i.a)(Object(i.a)({},e),{},{loading:t.payload.loading,todos:Object(l.a)(a)});case w.ADD:if(!(t.payload.length<2)){var s=t.payload;return b.a.post("http://localhost:3001/todos",{data:s},{headers:{"x-access-token":localStorage.getItem("token")}}).then((function(){return console.log("todo posted")})),console.log(Object(l.a)(e.todos[0].todo)),Object(i.a)(Object(i.a)({},e),{},{todos:[].concat(Object(l.a)(e.todos),[{todo:s}]),loading:!1})}alert("minimum length of todo should be 2");case w.DELETE:return b.a.delete("http://localhost:3001/todos",{data:{id:t.payload}}).then((function(){return alert("todo with id ".concat(t.payload," deleted"))})).catch((function(e){return console.log(e)})),Object(i.a)(Object(i.a)({},e),{},{todos:e.todos.filter((function(e){return e.id!==t.payload}))});case w.EDIT:var c;return e.todos.map((function(e){e.id===t.payload&&(c=e)})),Object(i.a)(Object(i.a)({},e),{},{modalOpen:!0,todoToBeEdited:c});case w.UPDATE:return b.a.patch("http://localhost:3001/todos",{id:t.payload.id,newTodo:t.payload.updatedTodo}).then((function(e){console.log(e),alert("todo updated")})).catch((function(e){return console.error(e)})),Object(i.a)(Object(i.a)({},e),{},{todos:e.todos.map((function(e){return e.id===t.payload.id&&(e.todo=t.payload.updatedTodo),e})),modalOpen:!1});default:return e}},T=function(){var e=Object(s.useReducer)(k,y),t=Object(r.a)(e,2),a=t[0],c=t[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(v,{dispatch:c,todos:a.todos,loading:a.loading,modalOpen:a.modalOpen,todoToBeEdited:a.todoToBeEdited}),Object(x.jsx)(N,{dispatch:c,isOpen:a.modalOpen,data:a.todoToBeEdited})]})},E=a(22),D=(a(356),function(){var e=Object(h.g)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("nav",{children:[Object(x.jsx)(E.b,{className:"nav-link",to:"/",children:"Home"}),Object(x.jsx)(E.b,{className:"nav-link",to:"/register",children:"Register"}),Object(x.jsx)(E.b,{onClick:function(){localStorage.removeItem("token")},className:"nav-link",to:"/login",children:"/login"===e.pathname?"":"/register"===e.pathname?"Login":"Logout"}),Object(x.jsx)(E.b,{className:"nav-link",to:"/change-password",children:"ChangePassword"})]})})}),C=a(24),S=a(45),P=a(15),F=(a(455),P.a().shape({name:P.c().required().min(2).max(30),email:P.c().required().email(),password:P.c().required().min(8).max(32),confirmpassword:P.c().required().oneOf([P.b("password")],"Passwords does not match"),mobilenumber:P.c().min(10).max(10).matches(/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,"Phone number is not valid"),profession:P.c().optional("optional").min(3).max(30)})),I=function(){var e,t,a,s,c,n,o=Object(h.f)(),r=Object(C.d)({resolver:Object(S.a)(F)}),l=r.register,d=r.handleSubmit,u=r.formState.errors,m=r.reset,O=function(){var e=Object(p.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.post("http://localhost:3001/register",t);case 3:e.sent,alert("user registered"),o.push("/login"),m(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),(400===(a=e.t0.response).status||500===a.status)&&alert(a.data.error);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"registration-main-div",children:[Object(x.jsx)("h2",{className:"heading",children:"Register"}),Object(x.jsxs)("form",{className:"form",onSubmit:d(O),children:[Object(x.jsx)("label",{className:"control-label",htmlFor:"name",children:"Name"}),Object(x.jsxs)("div",{className:"input-wrapper",children:[Object(x.jsx)("i",{className:"fa fa-user"}),Object(x.jsx)("input",Object(i.a)(Object(i.a)({},l("name")),{},{type:"text",className:"name",placeholder:"Name"}))]}),Object(x.jsx)("p",{children:null===(e=u.name)||void 0===e?void 0:e.message}),Object(x.jsx)("label",{className:"control-label",htmlFor:"lastName",children:"Email"}),Object(x.jsxs)("div",{className:"input-wrapper",children:[Object(x.jsx)("i",{className:"fa fa-envelope"}),Object(x.jsx)("input",Object(i.a)(Object(i.a)({},l("email")),{},{type:"email",className:"email",placeholder:"Email"}))]}),Object(x.jsx)("p",{children:null===(t=u.email)||void 0===t?void 0:t.message}),Object(x.jsx)("label",{className:"control-label",htmlFor:"mobileNumber",children:"Mobile Number"}),Object(x.jsxs)("div",{className:"input-wrapper",children:[Object(x.jsx)("i",{className:"fas fa-phone"}),Object(x.jsx)("input",Object(i.a)(Object(i.a)({},l("mobilenumber")),{},{type:"text",className:"number",placeholder:"Mobile Number"}))]}),Object(x.jsx)("p",{children:null===(a=u.mobilenumber)||void 0===a?void 0:a.message}),Object(x.jsx)("label",{className:"control-label",htmlFor:"profession",children:"Profession"}),Object(x.jsxs)("div",{className:"input-wrapper",children:[Object(x.jsx)("i",{className:"fas fa-user-tie"}),Object(x.jsx)("input",Object(i.a)(Object(i.a)({},l("profession")),{},{type:"text",className:"profession",placeholder:"Your profession"}))]}),Object(x.jsx)("p",{children:null===(s=u.profession)||void 0===s?void 0:s.message}),Object(x.jsx)("label",{className:"control-label",htmlFor:"password",children:"Password"}),Object(x.jsxs)("div",{className:"input-wrapper",children:[Object(x.jsx)("i",{className:"fas fa-lock"}),Object(x.jsx)("input",Object(i.a)(Object(i.a)({},l("password")),{},{type:"password",className:"password",placeholder:"Password"}))]}),Object(x.jsx)("p",{children:null===(c=u.password)||void 0===c?void 0:c.message}),Object(x.jsx)("label",{className:"control-label",htmlFor:"confirmPassword",children:"Confirm Password"}),Object(x.jsxs)("div",{className:"input-wrapper",children:[Object(x.jsx)("i",{className:"fas fa-lock"}),Object(x.jsx)("input",Object(i.a)(Object(i.a)({},l("confirmpassword")),{},{type:"password",className:"confirm-password",placeholder:"Confirm Password"}))]}),Object(x.jsx)("p",{children:null===(n=u.confirmpassword)||void 0===n?void 0:n.message}),Object(x.jsx)("button",{type:"submit",className:"submit-button",children:"Submit"})]})]})},A=P.a().shape({name:P.c().required().min(2).max(30),password:P.c().required().min(8).max(32)}),L=function(){var e,t,a=c.a.useContext(f).setUsername,s=Object(h.f)(),n=Object(C.d)({resolver:Object(S.a)(A)}),o=n.register,r=n.handleSubmit,l=n.formState.errors,d=n.reset,u=function(){var e=Object(p.a)(j.a.mark((function e(t){var c,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.post("http://localhost:3001/login",t);case 3:(c=e.sent).data.userToken&&(localStorage.setItem("token",c.data.userToken),alert("login successfull"),a(t.name),s.push("/"),d()),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),n=e.t0.response,console.log(n),400===n.status||404===n.status?alert(n.data.error):alert("Internal errors occured");case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("h2",{className:"heading",children:"Login"}),Object(x.jsxs)("form",{className:"form",onSubmit:r(u),children:[Object(x.jsx)("label",{className:"control-label",htmlFor:"Name",children:"Name"}),Object(x.jsxs)("div",{className:"input-wrapper",children:[Object(x.jsx)("i",{className:"fa fa-user"}),Object(x.jsx)("input",Object(i.a)(Object(i.a)({},o("name")),{},{type:"text",className:"Name",placeholder:"Name"}))]}),Object(x.jsx)("p",{children:null===(e=l.name)||void 0===e?void 0:e.message}),Object(x.jsx)("label",{className:"control-label",htmlFor:"password",children:"Password"}),Object(x.jsxs)("div",{className:"input-wrapper",children:[Object(x.jsx)("i",{className:"fas fa-lock"}),Object(x.jsx)("input",Object(i.a)(Object(i.a)({autoComplete:"off"},o("password")),{},{type:"password",className:"password",placeholder:"Password"}))]}),Object(x.jsx)("p",{children:null===(t=l.password)||void 0===t?void 0:t.message}),Object(x.jsx)("button",{type:"submit",className:"submit-button",children:"Login"})]})]})},q=P.a().shape({oldpassword:P.c().required().min(8).max(30),newpassword:P.c().required().min(8).max(32)}),U=function(){var e,t,a=Object(h.f)(),s=Object(C.d)({resolver:Object(S.a)(q)}),c=s.register,n=s.handleSubmit,o=s.formState.errors,r=(s.reset,function(){var e=Object(p.a)(j.a.mark((function e(t){var s,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.post("http://localhost:3001/change-password",t,{headers:{"x-access-token":localStorage.getItem("token")}});case 3:200===(s=e.sent).status&&(alert(s.data.message),a.push("/login")),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),400===(c=e.t0.response).status||404===c.status?alert(c.data.error):alert("Internal errors occured");case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}());return Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("h2",{className:"heading",children:"Login"}),Object(x.jsxs)("form",{className:"form",onSubmit:n(r),children:[Object(x.jsx)("label",{className:"control-label",htmlFor:"Name",children:"Old Password"}),Object(x.jsxs)("div",{className:"input-wrapper",children:[Object(x.jsx)("i",{className:"fa fa-lock"}),Object(x.jsx)("input",Object(i.a)(Object(i.a)({},c("oldpassword")),{},{type:"text",className:"Name",placeholder:"Old Password"}))]}),Object(x.jsx)("p",{children:null===(e=o.oldpassword)||void 0===e?void 0:e.message}),Object(x.jsx)("label",{className:"control-label",htmlFor:"password",children:"New Password"}),Object(x.jsxs)("div",{className:"input-wrapper",children:[Object(x.jsx)("i",{className:"fas fa-lock"}),Object(x.jsx)("input",Object(i.a)(Object(i.a)({autoComplete:"off"},c("newpassword")),{},{type:"password",className:"password",placeholder:"New Password"}))]}),Object(x.jsx)("p",{children:null===(t=o.newpassword)||void 0===t?void 0:t.message}),Object(x.jsx)("button",{type:"submit",className:"submit-button",children:"Change"})]})]})};var _=function(){return Object(x.jsx)(E.a,{children:Object(x.jsxs)(g,{children:[Object(x.jsx)(D,{}),Object(x.jsxs)(h.c,{children:[Object(x.jsx)(h.a,{exact:!0,path:"/",children:Object(x.jsx)(T,{})}),Object(x.jsx)(h.a,{exact:!0,path:"/register",component:I}),Object(x.jsx)(h.a,{exact:!0,path:"/login",component:L}),Object(x.jsx)(h.a,{exact:!0,path:"/change-password",component:U})]})]})})};o.a.render(Object(x.jsx)(_,{}),document.getElementById("root"))}},[[456,1,2]]]);
//# sourceMappingURL=main.f632870a.chunk.js.map